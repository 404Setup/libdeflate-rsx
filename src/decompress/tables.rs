use crate::common::*;

pub const PRECODE_TABLEBITS: usize = 7;
pub const PRECODE_ENOUGH: usize = 128;
pub const LITLEN_TABLEBITS: usize = 11;
pub const LITLEN_ENOUGH: usize = 2342;
pub const OFFSET_TABLEBITS: usize = 8;
pub const OFFSET_ENOUGH: usize = 402;

pub const PRECODE_DECODE_RESULTS: [u32; DEFLATE_NUM_PRECODE_SYMS] = [
    0 << 16,
    1 << 16,
    2 << 16,
    3 << 16,
    4 << 16,
    5 << 16,
    6 << 16,
    7 << 16,
    8 << 16,
    9 << 16,
    10 << 16,
    11 << 16,
    12 << 16,
    13 << 16,
    14 << 16,
    15 << 16,
    16 << 16,
    17 << 16,
    18 << 16,
];

pub const HUFFDEC_LITERAL: u32 = 0x80000000;
pub const HUFFDEC_EXCEPTIONAL: u32 = 0x00008000;
pub const HUFFDEC_SUBTABLE_POINTER: u32 = 0x00004000;
pub const HUFFDEC_END_OF_BLOCK: u32 = 0x00002000;

macro_rules! entry_lit {
    ($lit:expr) => {
        HUFFDEC_LITERAL | (($lit as u32) << 16)
    };
}

macro_rules! entry_len {
    ($base:expr, $extra:expr) => {
        (($base as u32) << 16) | ($extra as u32)
    };
}

macro_rules! entry_dist {
    ($base:expr, $extra:expr) => {
        (($base as u32) << 16) | ($extra as u32)
    };
}

pub const LITLEN_DECODE_RESULTS: [u32; DEFLATE_NUM_LITLEN_SYMS] = [
    entry_lit!(0),
    entry_lit!(1),
    entry_lit!(2),
    entry_lit!(3),
    entry_lit!(4),
    entry_lit!(5),
    entry_lit!(6),
    entry_lit!(7),
    entry_lit!(8),
    entry_lit!(9),
    entry_lit!(10),
    entry_lit!(11),
    entry_lit!(12),
    entry_lit!(13),
    entry_lit!(14),
    entry_lit!(15),
    entry_lit!(16),
    entry_lit!(17),
    entry_lit!(18),
    entry_lit!(19),
    entry_lit!(20),
    entry_lit!(21),
    entry_lit!(22),
    entry_lit!(23),
    entry_lit!(24),
    entry_lit!(25),
    entry_lit!(26),
    entry_lit!(27),
    entry_lit!(28),
    entry_lit!(29),
    entry_lit!(30),
    entry_lit!(31),
    entry_lit!(32),
    entry_lit!(33),
    entry_lit!(34),
    entry_lit!(35),
    entry_lit!(36),
    entry_lit!(37),
    entry_lit!(38),
    entry_lit!(39),
    entry_lit!(40),
    entry_lit!(41),
    entry_lit!(42),
    entry_lit!(43),
    entry_lit!(44),
    entry_lit!(45),
    entry_lit!(46),
    entry_lit!(47),
    entry_lit!(48),
    entry_lit!(49),
    entry_lit!(50),
    entry_lit!(51),
    entry_lit!(52),
    entry_lit!(53),
    entry_lit!(54),
    entry_lit!(55),
    entry_lit!(56),
    entry_lit!(57),
    entry_lit!(58),
    entry_lit!(59),
    entry_lit!(60),
    entry_lit!(61),
    entry_lit!(62),
    entry_lit!(63),
    entry_lit!(64),
    entry_lit!(65),
    entry_lit!(66),
    entry_lit!(67),
    entry_lit!(68),
    entry_lit!(69),
    entry_lit!(70),
    entry_lit!(71),
    entry_lit!(72),
    entry_lit!(73),
    entry_lit!(74),
    entry_lit!(75),
    entry_lit!(76),
    entry_lit!(77),
    entry_lit!(78),
    entry_lit!(79),
    entry_lit!(80),
    entry_lit!(81),
    entry_lit!(82),
    entry_lit!(83),
    entry_lit!(84),
    entry_lit!(85),
    entry_lit!(86),
    entry_lit!(87),
    entry_lit!(88),
    entry_lit!(89),
    entry_lit!(90),
    entry_lit!(91),
    entry_lit!(92),
    entry_lit!(93),
    entry_lit!(94),
    entry_lit!(95),
    entry_lit!(96),
    entry_lit!(97),
    entry_lit!(98),
    entry_lit!(99),
    entry_lit!(100),
    entry_lit!(101),
    entry_lit!(102),
    entry_lit!(103),
    entry_lit!(104),
    entry_lit!(105),
    entry_lit!(106),
    entry_lit!(107),
    entry_lit!(108),
    entry_lit!(109),
    entry_lit!(110),
    entry_lit!(111),
    entry_lit!(112),
    entry_lit!(113),
    entry_lit!(114),
    entry_lit!(115),
    entry_lit!(116),
    entry_lit!(117),
    entry_lit!(118),
    entry_lit!(119),
    entry_lit!(120),
    entry_lit!(121),
    entry_lit!(122),
    entry_lit!(123),
    entry_lit!(124),
    entry_lit!(125),
    entry_lit!(126),
    entry_lit!(127),
    entry_lit!(128),
    entry_lit!(129),
    entry_lit!(130),
    entry_lit!(131),
    entry_lit!(132),
    entry_lit!(133),
    entry_lit!(134),
    entry_lit!(135),
    entry_lit!(136),
    entry_lit!(137),
    entry_lit!(138),
    entry_lit!(139),
    entry_lit!(140),
    entry_lit!(141),
    entry_lit!(142),
    entry_lit!(143),
    entry_lit!(144),
    entry_lit!(145),
    entry_lit!(146),
    entry_lit!(147),
    entry_lit!(148),
    entry_lit!(149),
    entry_lit!(150),
    entry_lit!(151),
    entry_lit!(152),
    entry_lit!(153),
    entry_lit!(154),
    entry_lit!(155),
    entry_lit!(156),
    entry_lit!(157),
    entry_lit!(158),
    entry_lit!(159),
    entry_lit!(160),
    entry_lit!(161),
    entry_lit!(162),
    entry_lit!(163),
    entry_lit!(164),
    entry_lit!(165),
    entry_lit!(166),
    entry_lit!(167),
    entry_lit!(168),
    entry_lit!(169),
    entry_lit!(170),
    entry_lit!(171),
    entry_lit!(172),
    entry_lit!(173),
    entry_lit!(174),
    entry_lit!(175),
    entry_lit!(176),
    entry_lit!(177),
    entry_lit!(178),
    entry_lit!(179),
    entry_lit!(180),
    entry_lit!(181),
    entry_lit!(182),
    entry_lit!(183),
    entry_lit!(184),
    entry_lit!(185),
    entry_lit!(186),
    entry_lit!(187),
    entry_lit!(188),
    entry_lit!(189),
    entry_lit!(190),
    entry_lit!(191),
    entry_lit!(192),
    entry_lit!(193),
    entry_lit!(194),
    entry_lit!(195),
    entry_lit!(196),
    entry_lit!(197),
    entry_lit!(198),
    entry_lit!(199),
    entry_lit!(200),
    entry_lit!(201),
    entry_lit!(202),
    entry_lit!(203),
    entry_lit!(204),
    entry_lit!(205),
    entry_lit!(206),
    entry_lit!(207),
    entry_lit!(208),
    entry_lit!(209),
    entry_lit!(210),
    entry_lit!(211),
    entry_lit!(212),
    entry_lit!(213),
    entry_lit!(214),
    entry_lit!(215),
    entry_lit!(216),
    entry_lit!(217),
    entry_lit!(218),
    entry_lit!(219),
    entry_lit!(220),
    entry_lit!(221),
    entry_lit!(222),
    entry_lit!(223),
    entry_lit!(224),
    entry_lit!(225),
    entry_lit!(226),
    entry_lit!(227),
    entry_lit!(228),
    entry_lit!(229),
    entry_lit!(230),
    entry_lit!(231),
    entry_lit!(232),
    entry_lit!(233),
    entry_lit!(234),
    entry_lit!(235),
    entry_lit!(236),
    entry_lit!(237),
    entry_lit!(238),
    entry_lit!(239),
    entry_lit!(240),
    entry_lit!(241),
    entry_lit!(242),
    entry_lit!(243),
    entry_lit!(244),
    entry_lit!(245),
    entry_lit!(246),
    entry_lit!(247),
    entry_lit!(248),
    entry_lit!(249),
    entry_lit!(250),
    entry_lit!(251),
    entry_lit!(252),
    entry_lit!(253),
    entry_lit!(254),
    entry_lit!(255),
    HUFFDEC_EXCEPTIONAL | HUFFDEC_END_OF_BLOCK,
    entry_len!(3, 0),
    entry_len!(4, 0),
    entry_len!(5, 0),
    entry_len!(6, 0),
    entry_len!(7, 0),
    entry_len!(8, 0),
    entry_len!(9, 0),
    entry_len!(10, 0),
    entry_len!(11, 1),
    entry_len!(13, 1),
    entry_len!(15, 1),
    entry_len!(17, 1),
    entry_len!(19, 2),
    entry_len!(23, 2),
    entry_len!(27, 2),
    entry_len!(31, 2),
    entry_len!(35, 3),
    entry_len!(43, 3),
    entry_len!(51, 3),
    entry_len!(59, 3),
    entry_len!(67, 4),
    entry_len!(83, 4),
    entry_len!(99, 4),
    entry_len!(115, 4),
    entry_len!(131, 5),
    entry_len!(163, 5),
    entry_len!(195, 5),
    entry_len!(227, 5),
    entry_len!(258, 0),
    entry_len!(258, 0),
    entry_len!(258, 0),
];

pub const OFFSET_DECODE_RESULTS: [u32; DEFLATE_NUM_OFFSET_SYMS] = [
    entry_dist!(1, 0),
    entry_dist!(2, 0),
    entry_dist!(3, 0),
    entry_dist!(4, 0),
    entry_dist!(5, 1),
    entry_dist!(7, 1),
    entry_dist!(9, 2),
    entry_dist!(13, 2),
    entry_dist!(17, 3),
    entry_dist!(25, 3),
    entry_dist!(33, 4),
    entry_dist!(49, 4),
    entry_dist!(65, 5),
    entry_dist!(97, 5),
    entry_dist!(129, 6),
    entry_dist!(193, 6),
    entry_dist!(257, 7),
    entry_dist!(385, 7),
    entry_dist!(513, 8),
    entry_dist!(769, 8),
    entry_dist!(1025, 9),
    entry_dist!(1537, 9),
    entry_dist!(2049, 10),
    entry_dist!(3073, 10),
    entry_dist!(4097, 11),
    entry_dist!(6145, 11),
    entry_dist!(8193, 12),
    entry_dist!(12289, 12),
    entry_dist!(16385, 13),
    entry_dist!(24577, 13),
    entry_dist!(24577, 13),
    entry_dist!(24577, 13),
];
