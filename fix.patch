--- src/decompress/mod.rs
+++ src/decompress/mod.rs
@@ -548,15 +548,12 @@
                             i += 1;
                         }
                     } else {
-                        let mut copied = 0;
-                        while copied + offset <= length {
-                            std::ptr::copy_nonoverlapping(
-                                src_ptr.add(copied),
-                                dest_ptr.add(copied),
-                                offset,
-                            );
-                            copied += offset;
-                        }
+                        let pattern = prepare_pattern(offset, src_ptr);
+                        let mut i = 0;
+                        while i + 8 <= length {
+                            std::ptr::write_unaligned(dest_ptr.add(i) as *mut u64, pattern);
+                            i += offset;
+                        }
                         while copied < length {
-                            *dest_ptr.add(copied) = *src_ptr.add(copied);
-                            copied += 1;
+                            *dest_ptr.add(i) = *src_ptr.add(i);
+                            i += 1;
                         }
                     }
                 } else {
@@ -700,9 +697,12 @@
                                 i += 1;
                             }
                         } else {
-                            let mut copied = 0;
-                            while copied < length {
-                                *out_next.add(copied) = *src.add(copied);
-                                copied += 1;
-                            }
+                            let pattern = prepare_pattern(offset, src);
+                            let mut i = 0;
+                            while i + 8 <= length {
+                                (out_next.add(i) as *mut u64).write_unaligned(pattern);
+                                i += offset;
+                            }
+                            while i < length {
+                                *out_next.add(i) = *src.add(i);
+                                i += 1;
+                            }
                         }
                     } else {
                         if offset >= length {
@@ -877,15 +877,12 @@
                                     i += 1;
                                 }
                             } else {
-                                let mut copied = 0;
-                                while copied < length {
-                                    let copy_len = min(offset, length - copied);
-                                    std::ptr::copy_nonoverlapping(
-                                        out_ptr.add(src + copied),
-                                        out_ptr.add(dest + copied),
-                                        copy_len,
-                                    );
-                                    copied += copy_len;
-                                }
+                                let pattern = prepare_pattern(offset, src_ptr);
+                                let mut i = 0;
+                                while i + 8 <= length {
+                                    std::ptr::write_unaligned(dest_ptr.add(i) as *mut u64, pattern);
+                                    i += offset;
+                                }
+                                while i < length {
+                                    *dest_ptr.add(i) = *src_ptr.add(i);
+                                    i += 1;
+                                }
                             }
                         }
                         *out_idx += length;
